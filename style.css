:root{
  --radius:14px;
  --glass: rgba(255,255,255,0.06);
  --accent: #667eea;
  --safe: #2ecc71;
  --danger: #e74c3c;
  --bg-dark: linear-gradient(135deg,#0f2027 0%,#203a43 50%,#2c5364 100%);
  --bg-light: linear-gradient(135deg,#dfe9ff 0%,#f7e6ff 100%);
  --bg-colorful: linear-gradient(135deg,#ff6b6b 0%,#4ecdc4 100%);
  --container-dark: rgba(30,40,50,0.92);
  --container-light: rgba(255,255,255,0.96);
  --container-colorful: rgba(255,255,255,0.95);
  --text-dark: #ecf0f1;
  --text-light: #102133;
  --muted: rgba(255,255,255,0.7);
  --shadow: 0 12px 30px rgba(2,6,23,0.45);
}

/* base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  display:flex;
  align-items:stretch;
  justify-content:center;
  min-height:100vh;
  transition:background 300ms ease;
  background:var(--bg-dark);
  color:var(--text-dark);
  -webkit-tap-highlight-color: transparent;
}

/* themes */
body[data-theme="dark"]{ background: var(--bg-dark); color: var(--text-dark); }
body[data-theme="light"]{ background: var(--bg-light); color: var(--text-light); }
body[data-theme="colorful"]{ background: var(--bg-colorful); color: var(--text-light); }

.container{
  width:min(960px,96%);
  margin:20px;
  background:var(--container-dark);
  border-radius:var(--radius);
  padding:18px;
  box-shadow:var(--shadow);
  display:flex;
  flex-direction:column;
  gap:12px;
  transition:background 250ms ease, transform 250ms ease;
}

/* theme-specific container */
body[data-theme="light"] .container{ background:var(--container-light) }
body[data-theme="colorful"] .container{ background:var(--container-colorful) }

/* theme switcher (fixed, accessible) */
.theme-switcher{
  position:fixed;
  right:14px; top:14px;
  display:flex; gap:8px;
  background: rgba(255,255,255,0.04);
  padding:8px;
  border-radius:999px;
  z-index:999;
  backdrop-filter: blur(6px);
}
.theme-btn{
  border:0; background:transparent; padding:8px; font-size:18px; border-radius:50%;
  cursor:pointer; opacity:0.8;
  transition: transform .15s ease, opacity .15s ease, background .15s ease;
}
.theme-btn:active{ transform:scale(.98) }
.theme-btn.active{ background:rgba(255,255,255,0.06); opacity:1 }

/* header */
.header{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:6px 4px }
.title{ font-weight:800; font-size:1.5rem; letter-spacing:-0.5px; margin:0 }
.wins-box{ display:flex; flex-direction:column; align-items:flex-end; gap:2px; padding:6px 10px; border-radius:10px; background:rgba(0,0,0,0.04) }
.wins-label{ font-size:0.72rem; opacity:0.85 }
.wins-value{ font-size:1.1rem }

/* controls */
.controls{ display:flex; flex-direction:column; gap:10px; padding:6px 4px }
.select-row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
.select-row label{ flex:1; min-width:140px; font-weight:600; font-size:0.9rem }
select{
  width:100%;
  margin-top:6px;
  padding:10px 12px;
  border-radius:10px;
  border:0;
  background:var(--glass);
  color:inherit;
  outline:none;
  -webkit-appearance:none;
}
.info-row{ display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap }
.hint-btn{
  padding:10px 14px; border-radius:12px; border:0; font-weight:700; cursor:pointer;
  background: linear-gradient(135deg,#ffd966,#ffd34a); color:#182022; box-shadow:0 8px 18px rgba(0,0,0,0.12)
}
.hint-btn:disabled{ opacity:0.5; cursor:not-allowed; transform:none; box-shadow:none }
.hints{ font-weight:700 }

/* game area: modern stacked layout */
.game{ display:flex; gap:14px; align-items:flex-start; padding:4px 0; flex-direction:column }
@media(min-width:900px){ .game{ flex-direction:row } }

.visual{
  width:100%;
  display:flex; align-items:center; justify-content:center;
  padding:6px; border-radius:12px; background:rgba(0,0,0,0.03)
}
.figure-container{
  width:100%; max-width:360px; height:auto; display:block;
  stroke: currentColor; stroke-width:4; fill:transparent;
}

/* sidebar (word + wrong letters) */
.sidebar{ display:flex; flex-direction:column; gap:12px; width:100% }
.word-progress{ padding:10px; border-radius:12px; background:var(--glass); display:flex; align-items:center; justify-content:center; min-height:72px }
.word{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; align-items:center }
.letter{ min-width:42px; height:54px; display:inline-flex; align-items:center; justify-content:center; border-bottom:3px solid var(--accent); font-weight:800; font-size:1.15rem; text-transform:uppercase; border-radius:6px; padding:4px; background:rgba(255,255,255,0.02) }
.letter.revealed{ color:var(--safe); animation:bounceIn .45s ease }
@keyframes bounceIn{ from{ transform:scale(.6); opacity:0 } to{ transform:scale(1); opacity:1 } }

.wrong-letters-container{ padding:10px; border-radius:12px; background:rgba(0,0,0,0.03) }
.wrong-letters{ display:flex; gap:8px; flex-wrap:wrap; font-weight:800; color:var(--danger) }

/* keyboard: mobile first */
.keyboard-wrap{ position:relative; margin-top:6px; display:flex; justify-content:center; width:100% }
.keyboard{
  display:grid;
  gap:8px;
  grid-template-columns: repeat(13, 1fr);
  width:100%;
  max-width:900px;
  padding:10px;
  border-radius:12px;
  background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01));
  touch-action: manipulation;
}
.key{
  appearance:none;
  -webkit-appearance:none;
  border:0;
  background:rgba(255,255,255,0.04);
  padding:12px 8px;
  border-radius:10px;
  font-weight:800;
  font-size:1rem;
  text-transform:uppercase;
  cursor:pointer;
  user-select:none;
  min-height:48px;
  display:flex; align-items:center; justify-content:center;
  transition: transform .08s ease, box-shadow .12s ease, background .12s ease;
}
.key:active{ transform:scale(.985) }
.key.used{ opacity:0.45; cursor:not-allowed; transform:scale(.98) }
.key.correct{ background:var(--safe); color:#fff; box-shadow:0 6px 14px rgba(46,204,113,0.12) }
.key.wrong{ background:var(--danger); color:#fff; box-shadow:0 6px 14px rgba(231,76,60,0.12) }

@media (max-width:820px){
  .keyboard{ grid-template-columns: repeat(9,1fr); padding:12px }
  .letter{ min-width:36px; height:48px; font-size:1rem }
  .key{ padding:14px 8px; min-height:54px; font-size:1.05rem }
}
@media (max-width:420px){
  .keyboard{ grid-template-columns: repeat(7,1fr); gap:6px; padding:14px }
  .container{ margin:10px; padding:14px; border-radius:12px }
  .title{ font-size:1.25rem }
  .figure-container{ max-width:300px }
  .key{ min-height:56px; font-size:1.06rem; border-radius:12px }
  .letter{ min-width:32px; height:44px; font-size:.95rem }
  .visual{ padding:6px }
}

/* popup & notifications */
.popup-container{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(2,6,23,0.6); z-index:10000; padding:18px }
.popup{ background:var(--container-dark); padding:18px; border-radius:12px; text-align:center; box-shadow: var(--shadow); max-width:420px; width:100% }
body[data-theme="light"] .popup{ background:var(--container-light) }
.popup-icon{ font-size:2.8rem; margin-bottom:6px }
.play-again-btn{ padding:10px 18px; border-radius:10px; border:0; background:linear-gradient(135deg,var(--accent), #764ba2); color:#fff; font-weight:800; margin-top:10px }

/* notification */
.notification-container{ position:fixed; left:50%; transform:translateX(-50%); bottom:8vh; display:flex; gap:8px; align-items:center; padding:10px 14px; border-radius:999px; background:rgba(255,255,255,0.95); color:#1b2530; box-shadow:0 12px 30px rgba(0,0,0,0.15); opacity:0; pointer-events:none; transition: all .28s ease; z-index:12000 }
.notification-container.show{ opacity:1; pointer-events:auto; transform:translateX(-50%) translateY(0) }
.notification-icon{ font-size:18px }

/* small helpers */
.sr-only{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden }
.celebration-bg{ position:fixed; inset:0; pointer-events:none; opacity:0; transition:opacity .4s ease; z-index:9998 }
.celebration-bg.active{ opacity:1 }
.confetti{ position:fixed; width:10px; height:10px; pointer-events:none; z-index:10001; animation: confettiFall 2.6s linear forwards }
@keyframes confettiFall{ 0%{ transform:translateY(-120px) rotate(0deg); opacity:1 } 100%{ transform:translateY(100vh) rotate(360deg); opacity:0 } }
